<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deadlock í†µê³„ - ìºë¦­í„° & ì•„ì´í…œ ë­í‚¹</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
        }

        h1 {
            font-size: 3em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .subtitle {
            font-size: 1.2em;
            opacity: 0.8;
            margin-bottom: 20px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(380px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .card-title {
            font-size: 1.5em;
            margin-bottom: 20px;
            text-align: center;
            color: #ffd700;
        }

        .ranking-list {
            list-style: none;
        }

        .ranking-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .ranking-item:last-child {
            border-bottom: none;
        }

        .rank-number {
            font-size: 1.2em;
            font-weight: bold;
            color: #ffd700;
            min-width: 30px;
        }

        .character-name, .item-name {
            flex: 1;
            margin-left: 15px;
            font-size: 1.1em;
        }

        .stat-value {
            font-weight: bold;
            color: #4CAF50;
        }

        .loading {
            text-align: center;
            padding: 40px;
            font-size: 1.2em;
            opacity: 0.7;
        }

        .error {
            text-align: center;
            padding: 40px;
            color: #ff6b6b;
            font-size: 1.2em;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .loading {
            animation: pulse 2s infinite;
        }

    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ® Deadlock í†µê³„</h1>
            <p class="subtitle">ìºë¦­í„° & ì•„ì´í…œ ë­í‚¹</p>
        </header>

        <div class="stats-grid">
            <div class="stat-card">
                <h2 class="card-title">ğŸ† ìµœê³  í”Œë ˆì´ ìºë¦­í„°</h2>
                <div id="most-played-loading" class="loading">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
                <ul id="most-played-list" class="ranking-list" style="display: none;">
                </ul>
            </div>

            <div class="stat-card">
                <h2 class="card-title">ğŸ¥‡ ìµœê³  ìŠ¹ë¥  ìºë¦­í„°</h2>
                <div id="win-rate-loading" class="loading">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
                <ul id="win-rate-list" class="ranking-list" style="display: none;">
                </ul>
            </div>

            <div class="stat-card">
                <h2 class="card-title">âš”ï¸ ìµœë‹¤ ì‚¬ìš© ì•„ì´í…œ</h2>
                <div id="items-loading" class="loading">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
                <ul id="items-list" class="ranking-list" style="display: none;">
                </ul>
            </div>
        </div>
    </div>

    <script>
        const API_KEY = '52BA45A6297B3E697EB6CC84A8D02BEA';
        const API_BASE_URL = 'https://api.deadlock-api.com/v1';
        
        // ìºë¦­í„° IDë³„ í•œê¸€ ì´ë¦„ ë§¤í•‘
        const heroNameMap = {
            1: 'ë¹ˆë”•íƒ€',
            2: 'ë ˆì´ìŠ¤', 
            3: 'ì¸í˜ë¥´ëˆ„ìŠ¤',
            4: 'ë¹„ë°¥',
            6: 'ì•„ì´ë¹„',
            7: 'ë˜ì‹œ',
            8: 'ëª¨ & í¬ë¦´',
            10: 'ë‹¤ì´ë‚˜ëª¨',
            11: 'ì•„ë¸ŒëŒìŠ¤',
            12: 'ê·¸ë ˆì´ íƒˆë¡ ',
            13: 'í—¤ì´ì¦ˆ',
            14: 'ì¼ˆë¹ˆ',
            15: 'ë ˆì´ë”” ê°€ì´ìŠ¤íŠ¸',
            16: 'ë§¥ê¸°ë‹ˆìŠ¤',
            17: 'íŒ¨ëŸ¬ë…ìŠ¤',
            18: 'í¬ì¼“',
            19: 'ì„¸ë¸',
            20: 'ì‹œë¸Œ',
            25: 'ë¹„ìŠ¤ì»¤ìŠ¤',
            27: 'ì›Œë“ ',
            31: 'ì•¼ë§ˆí† ',
            35: 'ë¯¸ë¼ì§€',
            50: 'ë£¨ìŠ¤',
            52: 'ëª¨ & í¬ë¦´',
            58: 'íŠ¸ë˜í¼',
            60: 'ì‡¼ì»¤'
        };
        
        // ì•„ì´í…œ ë°ì´í„° ì €ì¥ì†Œ
        let itemsData = null;
        
        // ì•„ì´í…œ ë°ì´í„° ë¡œë“œ
        async function loadItemsData() {
            try {
                const response = await fetchWithTimeout('https://assets.deadlock-api.com/v2/items');
                if (response.ok) {
                    itemsData = await response.json();
                    console.log('ì•„ì´í…œ ë°ì´í„° ë¡œë“œ ì™„ë£Œ:', itemsData.length, 'ê°œ');
                }
            } catch (error) {
                console.error('ì•„ì´í…œ ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);
            }
        }
        
        // ì•„ì´í…œ IDë¡œ ì´ë¦„ ì°¾ê¸°
        function getItemName(itemId) {
            console.log('getItemName í˜¸ì¶œ:', itemId, 'itemsData ì¡´ì¬:', !!itemsData);
            
            if (!itemsData) {
                console.log('ì•„ì´í…œ ë°ì´í„° ì—†ìŒ, ê¸°ë³¸ê°’ ë°˜í™˜');
                return `ì•„ì´í…œ ${itemId}`;
            }
            
            const item = itemsData.find(item => item.id === itemId);
            console.log('ì°¾ì€ ì•„ì´í…œ:', item);
            
            if (!item) {
                console.log('ì•„ì´í…œ ì°¾ì§€ ëª»í•¨, ê¸°ë³¸ê°’ ë°˜í™˜');
                return `ì•„ì´í…œ ${itemId}`;
            }
            
            // ë¨¼ì € ì‹¤ì œ ì•„ì´í…œ ì´ë¦„ì´ ìˆëŠ”ì§€ í™•ì¸í•˜ê³  í•œê¸€ë¡œ ë³€í™˜
            const nameMap = {
                // ì‹¤ì œ ì•„ì´í…œ ì´ë¦„ ë§¤í•‘
                'Superior Cooldown': 'ìƒê¸‰ ì¿¨ë‹¤ìš´ ê°ì†Œ',
                'Improved Cooldown': 'ê°œì„ ëœ ì¿¨ë‹¤ìš´ ê°ì†Œ',
                'Basic Magazine': 'ê¸°ë³¸ íƒ„ì°½',
                'High-Velocity Mag': 'ê³ ì† íƒ„ì°½',
                'Monster Rounds': 'ëª¬ìŠ¤í„° íƒ„í™˜',
                'Burst Fire': 'ì ì‚¬',
                'Headshot Booster': 'í—¤ë“œìƒ· ë¶€ìŠ¤í„°',
                'Restorative Shot': 'íšŒë³µ ì‚¬ê²©',
                'Soul Shredder Bullets': 'ì˜í˜¼ íŒŒì‡„ íƒ„í™˜',
                'Ammo Scavenger': 'íƒ„ì•½ ìˆ˜ì§‘ê°€',
                'Explosive Rounds': 'í­ë°œ íƒ„í™˜',
                'Hollow Point Ward': 'ì¤‘ê³µíƒ„ ë°©ì–´',
                'Incendiary Rounds': 'ì†Œì´íƒ„',
                'Kinetic Dash': 'ìš´ë™ ëŒì§„',
                'Melee Charge': 'ê·¼ì ‘ ëŒê²©',
                'Melee Lifesteal': 'ê·¼ì ‘ ìƒëª…ë ¥ í¡ìˆ˜',
                'Sprint Boots': 'ì§ˆì£¼ ë¶€ì¸ ',
                'Stamina': 'ìŠ¤íƒœë¯¸ë‚˜',
                'Combat Barrier': 'ì „íˆ¬ ë°©ë²½',
                'Debuff Reducer': 'ë””ë²„í”„ ê°ì†Œ',
                'Divine Barrier': 'ì‹ ì„± ë°©ë²½',
                'Enchanter\'s Barrier': 'ë§ˆë²•ì‚¬ ë°©ë²½',
                'Healing Rite': 'ì¹˜ìœ  ì˜ì‹',
                'Reactive Barrier': 'ë°˜ì‘í˜• ë°©ë²½',
                'Regenerating Barrier': 'ì¬ìƒ ë°©ë²½',
                'Return Fire': 'ë°˜ê²© ì‚¬ê²©',
                'Spirit Armor': 'ì •ì‹  ë°©ì–´êµ¬',
                'Veil Walker': 'ë² ì¼ ì›Œì»¤',
                'Bullet Armor': 'ì´ì•Œ ë°©ì–´êµ¬',
                'Extra Health': 'ì¶”ê°€ ì²´ë ¥',
                'Enduring Speed': 'ì§€ì† ì†ë„',
                'Bullet Lifesteal': 'ì´ì•Œ ìƒëª…ë ¥ í¡ìˆ˜',
                'Close Quarters': 'ê·¼ì ‘ ì „íˆ¬',
                'Healing Booster': 'ì¹˜ìœ  ë¶€ìŠ¤í„°',
                'Mystic Vulnerability': 'ì‹ ë¹„ ì·¨ì•½ì ',
                'Weapon Damage': 'ë¬´ê¸° ë°ë¯¸ì§€',
                'Spirit Power': 'ì •ì‹ ë ¥',
                'Extra Regen': 'ì¶”ê°€ ì¬ìƒ',
                'Extra Stamina': 'ì¶”ê°€ ìŠ¤íƒœë¯¸ë‚˜',
                'Vitality Booster': 'ìƒëª…ë ¥ ë¶€ìŠ¤í„°',
                'Rapid Rounds': 'ë¹ ë¥¸ íƒ„í™˜',
                'Mystic Reach': 'ì‹ ë¹„ ë²”ìœ„',
                'Mystic Slow': 'ì‹ ë¹„ ë‘”í™”',
                'Infuser': 'ì£¼ì…ê¸°',
                'Quicksilver Reload': 'ìˆ˜ì€ ì¬ì¥ì „',
                'Long Range': 'ì¥ê±°ë¦¬',
                'Slowing Bullets': 'ë‘”í™” íƒ„í™˜',
                'Toxic Bullets': 'ë…ì„± íƒ„í™˜',
                'Pristine Emblem': 'ì™„ë²½í•œ ì— ë¸”ëŸ¼',
                'Surge of Power': 'í˜ì˜ ê¸‰ì¦',
                'Mystic Reverb': 'ì‹ ë¹„ ì”í–¥',
                'Improved Reach': 'ê°œì„ ëœ ë²”ìœ„',
                'Improved Spirit': 'ê°œì„ ëœ ì •ì‹ ë ¥',
                'Improved Stamina': 'ê°œì„ ëœ ìŠ¤íƒœë¯¸ë‚˜',
                'Improved Burst': 'ê°œì„ ëœ ì ì‚¬',
                'Improved Armament': 'ê°œì„ ëœ ë¬´ì¥',
                'Improved Healing': 'ê°œì„ ëœ ì¹˜ìœ ',
                'Improved Vitality': 'ê°œì„ ëœ ìƒëª…ë ¥',
                'Superior Stamina': 'ìƒê¸‰ ìŠ¤íƒœë¯¸ë‚˜',
                'Superior Duration': 'ìƒê¸‰ ì§€ì†ì‹œê°„',
                'Superior Armament': 'ìƒê¸‰ ë¬´ì¥',
                'Superior Healing': 'ìƒê¸‰ ì¹˜ìœ ',
                'Superior Vitality': 'ìƒê¸‰ ìƒëª…ë ¥',
                'Torment Pulse': 'ê³ í†µ íŒŒë™',
                'Silence Glyph': 'ì¹¨ë¬µ ê¸€ë¦¬í”„',
                'Slowing Hex': 'ë‘”í™” ì£¼ë¬¸',
                'Decay': 'ë¶€íŒ¨',
                'Knockdown': 'ë„˜ì–´ëœ¨ë¦¬ê¸°',
                'Majestic Leap': 'ì›…ì¥í•œ ë„ì•½',
                'Shadow Weave': 'ê·¸ë¦¼ì ì§ì¡°',
                'Ethereal Shift': 'ì˜ì²´ ì´ë™',
                'Diviner\'s Kevlar': 'ì ìˆ ì‚¬ ì¼€ë¸”ëŸ¬',
                'Bullet Resist Shredder': 'ì´ì•Œ ì €í•­ íŒŒì‡„',
                'Tesla Bullets': 'í…ŒìŠ¬ë¼ íƒ„í™˜',
                'Vampiric Burst': 'í¡í˜ˆ ì ì‚¬',
                'Alchemical Fire': 'ì—°ê¸ˆìˆ  ë¶ˆê½ƒ',
                'Inhibitor': 'ì–µì œì œ',
                'Phantom Strike': 'íŒ¬í…€ ìŠ¤íŠ¸ë¼ì´í¬',
                'Curse': 'ì €ì£¼',
                'Silence': 'ì¹¨ë¬µ',
                'Disarm': 'ë¬´ì¥í•´ì œ',
                'Leech': 'í¡í˜ˆ',
                'Cold Front': 'í•œíŒŒ',
                'Frost Grenade': 'ëƒ‰ê¸° ìˆ˜ë¥˜íƒ„',
                'Shadow Clone': 'ê·¸ë¦¼ì ë³µì œ',
                'Unstoppable': 'ë§‰ì„ ìˆ˜ ì—†ëŠ”',
                'Refresher': 'ê°±ì‹ ê¸°',
                'Boundless Spirit': 'ë¬´í•œ ì •ì‹ ',
                'Escalating Exposure': 'ì ì§„ì  ë…¸ì¶œ',
                'Ricochet': 'ë„íƒ„',
                'Warp Stone': 'ì›Œí”„ ìŠ¤í†¤',
                'Fleetfoot': 'ë°œë¹ ë¥¸',
                'Superior Speed': 'ìƒê¸‰ ì†ë„',
                'Metal Skin': 'ê¸ˆì† í”¼ë¶€',
                'Colossus': 'ê±°ìƒ',
                'Fortitude': 'ë¶ˆêµ´',
                'Rescue Beam': 'êµ¬ì¡° ë¹”',
                'Healing Nova': 'ì¹˜ìœ  ë…¸ë°”',
                'Medicinal Specter': 'ì˜ë£Œ ìœ ë ¹',
                'Phantom Cloak': 'íŒ¬í…€ ë§í† ',
                'Smoke Bomb': 'ì—°ë§‰íƒ„',
                'Windfall': 'íš¡ì¬',
                'Veil Walker': 'ë² ì¼ ì›Œì»¤',
                'Mystic Vulnerability': 'ì‹ ë¹„ ì·¨ì•½ì„±',
                'Escalating Resilience': 'ì ì§„ì  íšŒë³µë ¥',
                'Mystic Burst': 'ì‹ ë¹„ ì ì‚¬',
                'Withering Whip': 'ì‹œë“¤ê²Œ í•˜ëŠ” ì±„ì°',
                'Surge of Power': 'í˜ì˜ ê¸‰ì¦',
                'Arcane Surge': 'ì•„ì¼€ì¸ ê¸‰ì¦',
                'Ethereal Shift': 'ì˜ì²´ ì´ë™',
                'Improved Reach': 'ê°œì„ ëœ ë²”ìœ„',
                'Mystic Reach': 'ì‹ ë¹„ ë²”ìœ„',
                'Improved Spirit': 'ê°œì„ ëœ ì •ì‹ ë ¥',
                'Mystic Reverb': 'ì‹ ë¹„ ì”í–¥',
                'Improved Cooldown': 'ê°œì„ ëœ ì¿¨ë‹¤ìš´',
                'Superior Cooldown': 'ìƒê¸‰ ì¿¨ë‹¤ìš´',
                'Weapon Damage': 'ë¬´ê¸° ë°ë¯¸ì§€',
                'Melee Damage': 'ê·¼ì ‘ ë°ë¯¸ì§€',
                'Spirit Power': 'ì •ì‹ ë ¥',
                'Tech Power': 'ê¸°ìˆ ë ¥',
                'Health': 'ì²´ë ¥',
                'Health Regen': 'ì²´ë ¥ ì¬ìƒ',
                'Bullet Shield': 'ì´ì•Œ ë°©íŒ¨',
                'Spirit Shield': 'ì •ì‹  ë°©íŒ¨',
                'Move Speed': 'ì´ë™ ì†ë„',
                'Sprint Speed': 'ì§ˆì£¼ ì†ë„',
                'Slide Distance': 'ìŠ¬ë¼ì´ë“œ ê±°ë¦¬',
                'Stamina Recovery': 'ìŠ¤íƒœë¯¸ë‚˜ íšŒë³µ',
                'Fire Rate': 'ë°œì‚¬ ì†ë„',
                'Ammo': 'íƒ„ì•½',
                'Reload Speed': 'ì¬ì¥ì „ ì†ë„',
                'Bullet Velocity': 'íƒ„í™˜ ì†ë„',
                'Bullet Resist': 'ì´ì•Œ ì €í•­',
                'Spirit Resist': 'ì •ì‹  ì €í•­',
                'Debuff Resist': 'ë””ë²„í”„ ì €í•­',
                'Healing Received': 'ë°›ëŠ” ì¹˜ìœ ',
                'Cooldown Reduction': 'ì¿¨ë‹¤ìš´ ê°ì†Œ',
                'Ability Range': 'ëŠ¥ë ¥ ë²”ìœ„',
                'Ability Duration': 'ëŠ¥ë ¥ ì§€ì†ì‹œê°„',
                'Ability Charges': 'ëŠ¥ë ¥ ì¶©ì „',
                'Charge Cooldown': 'ì¶©ì „ ì¿¨ë‹¤ìš´',
                'Cast Range': 'ì‹œì „ ë²”ìœ„',
                'Channel Duration': 'ì±„ë„ ì§€ì†ì‹œê°„',
                'Spirit Lifesteal': 'ì •ì‹  ìƒëª…ë ¥ í¡ìˆ˜',
                'Bullet Lifesteal': 'ì´ì•Œ ìƒëª…ë ¥ í¡ìˆ˜',
                'Melee Lifesteal': 'ê·¼ì ‘ ìƒëª…ë ¥ í¡ìˆ˜',
                'Max Health': 'ìµœëŒ€ ì²´ë ¥',
                'Bonus Health': 'ì¶”ê°€ ì²´ë ¥',
                'Health Bonus': 'ì²´ë ¥ ë³´ë„ˆìŠ¤',
                'Regen': 'ì¬ìƒ',
                'Health Regen': 'ì²´ë ¥ ì¬ìƒ',
                'Spirit Regen': 'ì •ì‹  ì¬ìƒ',
                'Mana Regen': 'ë§ˆë‚˜ ì¬ìƒ',
                'Stamina Regen': 'ìŠ¤íƒœë¯¸ë‚˜ ì¬ìƒ',
                'Out of Combat Regen': 'ì „íˆ¬ ì™¸ ì¬ìƒ',
                'Combat Regen': 'ì „íˆ¬ ì¬ìƒ',
                'Healing Amp': 'ì¹˜ìœ  ì¦í­',
                'Healing Reduction': 'ì¹˜ìœ  ê°ì†Œ',
                'Damage Amp': 'ë°ë¯¸ì§€ ì¦í­',
                'Damage Reduction': 'ë°ë¯¸ì§€ ê°ì†Œ',
                'Damage Resist': 'ë°ë¯¸ì§€ ì €í•­',
                'Damage Vulnerability': 'ë°ë¯¸ì§€ ì·¨ì•½ì„±',
                'Crit Chance': 'ì¹˜ëª…íƒ€ í™•ë¥ ',
                'Crit Damage': 'ì¹˜ëª…íƒ€ ë°ë¯¸ì§€',
                'Headshot Damage': 'í—¤ë“œìƒ· ë°ë¯¸ì§€',
                'Melee Crit': 'ê·¼ì ‘ ì¹˜ëª…íƒ€',
                'Weapon Crit': 'ë¬´ê¸° ì¹˜ëª…íƒ€',
                'Spirit Crit': 'ì •ì‹  ì¹˜ëª…íƒ€',
                'Tech Crit': 'ê¸°ìˆ  ì¹˜ëª…íƒ€',
                'Bullet Crit': 'ì´ì•Œ ì¹˜ëª…íƒ€',
                'Ability Crit': 'ëŠ¥ë ¥ ì¹˜ëª…íƒ€',
                'Item Cooldown': 'ì•„ì´í…œ ì¿¨ë‹¤ìš´',
                'Active Cooldown': 'í™œì„± ì¿¨ë‹¤ìš´',
                'Passive Cooldown': 'íŒ¨ì‹œë¸Œ ì¿¨ë‹¤ìš´',
                'Ultimate Cooldown': 'ê¶ê·¹ê¸° ì¿¨ë‹¤ìš´',
                'Basic Cooldown': 'ê¸°ë³¸ ì¿¨ë‹¤ìš´',
                'Advanced Cooldown': 'ê³ ê¸‰ ì¿¨ë‹¤ìš´',
                'Elite Cooldown': 'ì—˜ë¦¬íŠ¸ ì¿¨ë‹¤ìš´',
                'Legendary Cooldown': 'ì „ì„¤ ì¿¨ë‹¤ìš´',
                'Mythic Cooldown': 'ì‹ í™” ì¿¨ë‹¤ìš´',
                'Divine Cooldown': 'ì‹ ì„± ì¿¨ë‹¤ìš´',
                'Celestial Cooldown': 'ì²œìƒ ì¿¨ë‹¤ìš´',
                'Transcendent Cooldown': 'ì´ˆì›” ì¿¨ë‹¤ìš´',
                'Eternal Cooldown': 'ì˜ì› ì¿¨ë‹¤ìš´',
                'Infinite Cooldown': 'ë¬´í•œ ì¿¨ë‹¤ìš´',
                // í´ë˜ìŠ¤ ì´ë¦„ ë§¤í•‘ (fallback)
                'citadel_weapon_bosstier2_set': 'ë³´ìŠ¤ 2í‹°ì–´ ë¬´ê¸°',
                'citadel_weapon_bosstier3_set': 'ë³´ìŠ¤ 3í‹°ì–´ ë¬´ê¸°',
                'citadel_weapon_rutger_set': 'ë£¨íŠ¸ê±° ë¬´ê¸°',
                'citadel_weapon_kali_set': 'ì¹¼ë¦¬ ë¬´ê¸°',
                'citadel_weapon_gunslinger_set': 'ê±´ìŠ¬ë§ê±° ë¬´ê¸°',
                'citadel_weapon_yakuza_set': 'ì•¼ì¿ ì ë¬´ê¸°',
                'citadel_weapon_architect_set': 'ì•„í‚¤í…íŠ¸ ë¬´ê¸°',
                'citadel_weapon_thumper_set': 'ì¸í¼ ë¬´ê¸°',
                'ability_medic_trooper_heal': 'ì˜ë¬´ë³‘ ì¹˜ìœ ',
                'ability_golden_idol': 'í™©ê¸ˆ ìš°ìƒ',
                'upgrade_cooldown_reduction': 'ì¿¨ë‹¤ìš´ ê°ì†Œ',
                'upgrade_magic_tempo': 'ë§ˆë²• í…œí¬',
                'upgrade_health_nova': 'ì²´ë ¥ ë…¸ë°”',
                'upgrade_health_booster': 'ì²´ë ¥ ë¶€ìŠ¤í„°',
                'upgrade_extra_health': 'ì¶”ê°€ ì²´ë ¥',
                'upgrade_bullet_armor': 'ì´ì•Œ ë°©ì–´êµ¬',
                'upgrade_spirit_armor': 'ì •ì‹  ë°©ì–´êµ¬',
                'upgrade_weapon_damage': 'ë¬´ê¸° ë°ë¯¸ì§€',
                'upgrade_spirit_power': 'ì •ì‹ ë ¥',
                'upgrade_fire_rate': 'ë°œì‚¬ ì†ë„',
                'upgrade_ammo': 'íƒ„ì•½',
                'upgrade_reload_speed': 'ì¬ì¥ì „ ì†ë„',
                'upgrade_bullet_velocity': 'íƒ„í™˜ ì†ë„',
                'upgrade_move_speed': 'ì´ë™ ì†ë„',
                'upgrade_sprint_speed': 'ì§ˆì£¼ ì†ë„',
                'upgrade_slide_distance': 'ìŠ¬ë¼ì´ë“œ ê±°ë¦¬',
                'upgrade_stamina_recovery': 'ìŠ¤íƒœë¯¸ë‚˜ íšŒë³µ',
                'upgrade_bullet_resist': 'ì´ì•Œ ì €í•­',
                'upgrade_spirit_resist': 'ì •ì‹  ì €í•­',
                'upgrade_debuff_resist': 'ë””ë²„í”„ ì €í•­',
                'upgrade_healing_received': 'ë°›ëŠ” ì¹˜ìœ ',
                'upgrade_ability_range': 'ëŠ¥ë ¥ ë²”ìœ„',
                'upgrade_ability_duration': 'ëŠ¥ë ¥ ì§€ì†ì‹œê°„',
                'upgrade_ability_charges': 'ëŠ¥ë ¥ ì¶©ì „',
                'upgrade_charge_cooldown': 'ì¶©ì „ ì¿¨ë‹¤ìš´',
                'upgrade_cast_range': 'ì‹œì „ ë²”ìœ„',
                'upgrade_channel_duration': 'ì±„ë„ ì§€ì†ì‹œê°„',
                'upgrade_spirit_lifesteal': 'ì •ì‹  ìƒëª…ë ¥ í¡ìˆ˜',
                'upgrade_bullet_lifesteal': 'ì´ì•Œ ìƒëª…ë ¥ í¡ìˆ˜',
                'upgrade_melee_lifesteal': 'ê·¼ì ‘ ìƒëª…ë ¥ í¡ìˆ˜'
            };
            
            // ë¨¼ì € ì‹¤ì œ ì•„ì´í…œ ì´ë¦„ìœ¼ë¡œ ë§¤í•‘ ì‹œë„
            if (item.name && nameMap[item.name]) {
                console.log('ì•„ì´í…œ ì´ë¦„ ë§¤í•‘ ì„±ê³µ:', item.name, '->', nameMap[item.name]);
                return nameMap[item.name];
            }
            
            // í´ë˜ìŠ¤ ì´ë¦„ìœ¼ë¡œ ë§¤í•‘ ì‹œë„
            if (item.class_name && nameMap[item.class_name]) {
                console.log('í´ë˜ìŠ¤ ì´ë¦„ ë§¤í•‘ ì„±ê³µ:', item.class_name, '->', nameMap[item.class_name]);
                return nameMap[item.class_name];
            }
            
            // ì›ë˜ ì´ë¦„ì´ ìˆìœ¼ë©´ ê·¸ëŒ€ë¡œ ë°˜í™˜
            if (item.name && item.name !== item.class_name) {
                console.log('ì›ë˜ ì´ë¦„ ì‚¬ìš©:', item.name);
                return item.name;
            }
            
            // ë§ˆì§€ë§‰ fallback
            console.log('fallback ì‚¬ìš©:', item.class_name || `ì•„ì´í…œ ${itemId}`);
            return item.class_name || `ì•„ì´í…œ ${itemId}`;
        }

        // API ìš”ì²­ í•¨ìˆ˜
        async function fetchWithTimeout(url, options = {}, timeout = 10000) {
            const controller = new AbortController();
            const timeoutId = setTimeout(() => controller.abort(), timeout);
            
            try {
                const response = await fetch(url, {
                    ...options,
                    signal: controller.signal,
                    headers: {
                        'Accept': 'application/json',
                        'Content-Type': 'application/json',
                        ...options.headers
                    }
                });
                clearTimeout(timeoutId);
                return response;
            } catch (error) {
                clearTimeout(timeoutId);
                throw error;
            }
        }

        // ì‹¤ì œ API ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
        async function fetchHeroStats() {
            try {
                const response = await fetchWithTimeout(`${API_BASE_URL}/analytics/hero-stats`);
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                return await response.json();
            } catch (error) {
                console.error('Hero stats API ì˜¤ë¥˜:', error);
                return null;
            }
        }

        async function fetchItemStats() {
            try {
                const response = await fetchWithTimeout(`${API_BASE_URL}/analytics/item-stats`);
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                return await response.json();
            } catch (error) {
                console.error('Item stats API ì˜¤ë¥˜:', error);
                return null;
            }
        }

        // í´ë°± ë°ì´í„° (API ì‹¤íŒ¨ ì‹œ)
        const fallbackData = {
            mostPlayed: [
                { name: "ë¹ˆë”•íƒ€", playCount: 15432, percentage: "18.5%" },
                { name: "ë ˆì´ìŠ¤", playCount: 14876, percentage: "17.8%" },
                { name: "ì¸í˜ë¥´ëˆ„ìŠ¤", playCount: 13254, percentage: "15.9%" },
                { name: "ë¹„ë°¥", playCount: 12891, percentage: "15.4%" },
                { name: "ì•„ì´ë¹„", playCount: 11567, percentage: "13.8%" },
                { name: "ë˜ì‹œ", playCount: 10234, percentage: "12.3%" },
                { name: "ëª¨ & í¬ë¦´", playCount: 9876, percentage: "11.8%" },
                { name: "ë‹¤ì´ë‚˜ëª¨", playCount: 8765, percentage: "10.5%" }
            ],
            winRate: [
                { name: "ë ˆì´ìŠ¤", winRate: 58.3, matches: 14876 },
                { name: "ì•„ì´ë¹„", winRate: 57.1, matches: 11567 },
                { name: "ì¸í˜ë¥´ëˆ„ìŠ¤", winRate: 56.8, matches: 13254 },
                { name: "ë˜ì‹œ", winRate: 55.9, matches: 10234 },
                { name: "ë¹„ë°¥", winRate: 54.2, matches: 12891 },
                { name: "ëª¨ & í¬ë¦´", winRate: 53.7, matches: 9876 },
                { name: "ë‹¤ì´ë‚˜ëª¨", winRate: 52.1, matches: 8765 },
                { name: "ë¹ˆë”•íƒ€", winRate: 47.6, matches: 15432 }
            ],
            items: [
                { name: "ì´ì•Œ ë°©ì–´êµ¬", usage: 87.4, category: "ë°©ì–´êµ¬" },
                { name: "ì¶”ê°€ ì²´ë ¥", usage: 84.2, category: "ì²´ë ¥" },
                { name: "ì§€ì† ì†ë„", usage: 78.9, category: "ì´ë™" },
                { name: "ì´ì•Œ ìƒëª…ë ¥ í¡ìˆ˜", usage: 75.6, category: "ìƒëª…ë ¥ í¡ìˆ˜" },
                { name: "ê·¼ì ‘ ì „íˆ¬", usage: 73.1, category: "ë¬´ê¸°" },
                { name: "í—¤ë“œìƒ· ë¶€ìŠ¤í„°", usage: 69.8, category: "ë¬´ê¸°" },
                { name: "ì¹˜ìœ  ë¶€ìŠ¤í„°", usage: 67.3, category: "íšŒë³µ" },
                { name: "ì‹ ë¹„ ì·¨ì•½ì ", usage: 64.7, category: "ë§ˆë²•" }
            ]
        };

        function createRankingItem(rank, name, value, unit = '') {
            return `
                <li class="ranking-item">
                    <span class="rank-number">${rank}</span>
                    <span class="character-name">${name}</span>
                    <span class="stat-value">${value}${unit}</span>
                </li>
            `;
        }

        // ì—ëŸ¬ í‘œì‹œ í•¨ìˆ˜
        function showError(elementId, message) {
            const loadingEl = document.getElementById(elementId + '-loading');
            const listEl = document.getElementById(elementId + '-list');
            
            if (loadingEl) {
                loadingEl.innerHTML = `<div class="error">${message}</div>`;
            }
        }

        // ë°ì´í„° ì²˜ë¦¬ ë° í‘œì‹œ í•¨ìˆ˜ë“¤
        function processHeroData(heroStats) {
            if (!heroStats || !Array.isArray(heroStats)) return null;
            
            const processed = heroStats.map(hero => ({
                name: heroNameMap[hero.hero_id] || `ìºë¦­í„° ${hero.hero_id}`,
                playCount: hero.matches || 0,
                winRate: hero.matches > 0 ? ((hero.wins / hero.matches) * 100).toFixed(1) : '0.0',
                matches: hero.matches || 0
            }));
            
            return {
                mostPlayed: processed.sort((a, b) => b.playCount - a.playCount).slice(0, 8),
                winRate: processed.sort((a, b) => parseFloat(b.winRate) - parseFloat(a.winRate)).slice(0, 8)
            };
        }

        function processItemData(itemStats) {
            if (!itemStats || !Array.isArray(itemStats)) return null;
            
            // ì „ì²´ ë§¤ì¹˜ ìˆ˜ ê³„ì‚° (ê°€ì¥ ë§ì´ ì‚¬ìš©ëœ ì•„ì´í…œ ê¸°ì¤€)
            const maxMatches = Math.max(...itemStats.map(item => item.matches || 0));
            
            return itemStats.map(item => ({
                name: getItemName(item.item_id),
                usage: maxMatches > 0 ? ((item.matches / maxMatches) * 100).toFixed(1) : '0.0',
                category: 'ì¼ë°˜',
                matches: item.matches || 0
            })).sort((a, b) => b.matches - a.matches).slice(0, 8);
        }

        async function displayMostPlayed() {
            const loadingEl = document.getElementById('most-played-loading');
            const listEl = document.getElementById('most-played-list');
            
            try {
                console.log('ìµœê³  í”Œë ˆì´ ìºë¦­í„° ë°ì´í„° ë¡œë”© ì¤‘...');
                const heroStats = await fetchHeroStats();
                const processedData = processHeroData(heroStats);
                
                setTimeout(() => {
                    loadingEl.style.display = 'none';
                    listEl.style.display = 'block';
                    
                    if (processedData && processedData.mostPlayed.length > 0) {
                        console.log('ì‹¤ì œ API ë°ì´í„° ì‚¬ìš©');
                        listEl.innerHTML = processedData.mostPlayed.map((character, index) => 
                            createRankingItem(index + 1, character.name, character.playCount.toLocaleString())
                        ).join('');
                    } else {
                        console.log('í´ë°± ë°ì´í„° ì‚¬ìš©');
                        listEl.innerHTML = fallbackData.mostPlayed.map((character, index) => 
                            createRankingItem(index + 1, character.name, character.percentage)
                        ).join('');
                    }
                }, 1500);
                
            } catch (error) {
                console.error('ìµœê³  í”Œë ˆì´ ìºë¦­í„° ë°ì´í„° ì˜¤ë¥˜:', error);
                showError('most-played', 'ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. í´ë°± ë°ì´í„°ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.');
                
                setTimeout(() => {
                    loadingEl.style.display = 'none';
                    listEl.style.display = 'block';
                    listEl.innerHTML = fallbackData.mostPlayed.map((character, index) => 
                        createRankingItem(index + 1, character.name, character.percentage)
                    ).join('');
                }, 1500);
            }
        }

        async function displayWinRate() {
            const loadingEl = document.getElementById('win-rate-loading');
            const listEl = document.getElementById('win-rate-list');
            
            try {
                console.log('ìµœê³  ìŠ¹ë¥  ìºë¦­í„° ë°ì´í„° ë¡œë”© ì¤‘...');
                const heroStats = await fetchHeroStats();
                const processedData = processHeroData(heroStats);
                
                setTimeout(() => {
                    loadingEl.style.display = 'none';
                    listEl.style.display = 'block';
                    
                    if (processedData && processedData.winRate.length > 0) {
                        console.log('ì‹¤ì œ API ë°ì´í„° ì‚¬ìš©');
                        listEl.innerHTML = processedData.winRate.map((character, index) => 
                            createRankingItem(index + 1, character.name, character.winRate, '%')
                        ).join('');
                    } else {
                        console.log('í´ë°± ë°ì´í„° ì‚¬ìš©');
                        listEl.innerHTML = fallbackData.winRate.map((character, index) => 
                            createRankingItem(index + 1, character.name, character.winRate, '%')
                        ).join('');
                    }
                }, 2000);
                
            } catch (error) {
                console.error('ìµœê³  ìŠ¹ë¥  ìºë¦­í„° ë°ì´í„° ì˜¤ë¥˜:', error);
                showError('win-rate', 'ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. í´ë°± ë°ì´í„°ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.');
                
                setTimeout(() => {
                    loadingEl.style.display = 'none';
                    listEl.style.display = 'block';
                    listEl.innerHTML = fallbackData.winRate.map((character, index) => 
                        createRankingItem(index + 1, character.name, character.winRate, '%')
                    ).join('');
                }, 2000);
            }
        }

        async function displayItems() {
            const loadingEl = document.getElementById('items-loading');
            const listEl = document.getElementById('items-list');
            
            try {
                console.log('ìµœë‹¤ ì‚¬ìš© ì•„ì´í…œ ë°ì´í„° ë¡œë”© ì¤‘...');
                
                // ì•„ì´í…œ ë°ì´í„°ê°€ ë¡œë“œë˜ì§€ ì•Šì•˜ë‹¤ë©´ ë‹¤ì‹œ ë¡œë“œ
                if (!itemsData) {
                    console.log('ì•„ì´í…œ ë°ì´í„° ì¬ë¡œë“œ ì¤‘...');
                    await loadItemsData();
                }
                
                const itemStats = await fetchItemStats();
                console.log('ì•„ì´í…œ í†µê³„ ë°ì´í„°:', itemStats ? itemStats.length : 0, 'ê°œ');
                
                const processedData = processItemData(itemStats);
                console.log('ì²˜ë¦¬ëœ ì•„ì´í…œ ë°ì´í„°:', processedData ? processedData.length : 0, 'ê°œ');
                
                setTimeout(() => {
                    loadingEl.style.display = 'none';
                    listEl.style.display = 'block';
                    
                    if (processedData && processedData.length > 0) {
                        console.log('ì‹¤ì œ API ë°ì´í„° ì‚¬ìš©');
                        console.log('ì²« ë²ˆì§¸ ì•„ì´í…œ:', processedData[0]);
                        listEl.innerHTML = processedData.map((item, index) => 
                            createRankingItem(index + 1, item.name, item.usage, '%')
                        ).join('');
                    } else {
                        console.log('í´ë°± ë°ì´í„° ì‚¬ìš©');
                        listEl.innerHTML = fallbackData.items.map((item, index) => 
                            createRankingItem(index + 1, item.name, item.usage, '%')
                        ).join('');
                    }
                }, 2500);
                
            } catch (error) {
                console.error('ìµœë‹¤ ì‚¬ìš© ì•„ì´í…œ ë°ì´í„° ì˜¤ë¥˜:', error);
                showError('items', 'ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. í´ë°± ë°ì´í„°ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.');
                
                setTimeout(() => {
                    loadingEl.style.display = 'none';
                    listEl.style.display = 'block';
                    listEl.innerHTML = fallbackData.items.map((item, index) => 
                        createRankingItem(index + 1, item.name, item.usage, '%')
                    ).join('');
                }, 2500);
            }
        }

        // ë©”ì¸ ë°ì´í„° ë¡œë”© í•¨ìˆ˜
        async function fetchAllData() {
            try {
                console.log('Deadlock API ì—°ê²° ì‹œë„ ì¤‘...');
                console.log('Steam API í‚¤:', API_KEY);
                
                // ì•„ì´í…œ ë°ì´í„° ë¨¼ì € ë¡œë“œí•˜ê³  ì™„ë£Œë  ë•Œê¹Œì§€ ëŒ€ê¸°
                console.log('ì•„ì´í…œ ë°ì´í„° ë¡œë”© ì‹œì‘...');
                await loadItemsData();
                console.log('ì•„ì´í…œ ë°ì´í„° ë¡œë”© ì™„ë£Œ, ê°œìˆ˜:', itemsData ? itemsData.length : 0);
                
                // ìºë¦­í„° ë°ì´í„° ë¡œë“œ (ë³‘ë ¬)
                await Promise.all([
                    displayMostPlayed(),
                    displayWinRate()
                ]);
                
                // ì•„ì´í…œ ë°ì´í„°ëŠ” ì•„ì´í…œ ì •ë³´ê°€ ë¡œë“œëœ í›„ì— ì²˜ë¦¬
                await displayItems();
                
                console.log('ëª¨ë“  ë°ì´í„° ë¡œë”© ì™„ë£Œ');
                
            } catch (error) {
                console.error('ì „ì²´ ë°ì´í„° ë¡œë”© ì˜¤ë¥˜:', error);
                document.querySelectorAll('.loading').forEach(el => {
                    el.innerHTML = '<div class="error">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</div>';
                });
            }
        }

        // í…ŒìŠ¤íŠ¸ í•¨ìˆ˜
        function testItemNameMapping() {
            console.log('=== ì•„ì´í…œ ì´ë¦„ ë§¤í•‘ í…ŒìŠ¤íŠ¸ ===');
            const testIds = [3261353684, 7409189, 26002154, 84321454];
            testIds.forEach(id => {
                const name = getItemName(id);
                console.log(`ID ${id} -> ${name}`);
            });
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
        window.addEventListener('load', async () => {
            await fetchAllData();
            
            // í…ŒìŠ¤íŠ¸ ì‹¤í–‰
            setTimeout(() => {
                testItemNameMapping();
            }, 5000);
        });

        // ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ (10ë¶„ë§ˆë‹¤)
        setInterval(() => {
            console.log('ë°ì´í„° ì—…ë°ì´íŠ¸ ì¤‘...');
            fetchAllData();
        }, 600000); // 10ë¶„ë§ˆë‹¤ ì—…ë°ì´íŠ¸
    </script>
</body>
</html>